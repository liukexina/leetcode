# 数值的整数次方

## 题目
实现 pow(x, n) ，即计算 x 的 n 次幂函数（即，xn）。不得使用库函数，同时不需要考虑大数问题。

示例 1：
```
输入：x = 2.00000, n = 10
输出：1024.00000
```
示例 2：
```
输入：x = 2.10000, n = 3
输出：9.26100
```
示例 3：
```
输入：x = 2.00000, n = -2
输出：0.25000
解释：2-2 = 1/22 = 1/4 = 0.25
```

提示：
```
-100.0 < x < 100.0
-231 <= n <= 231-1
-104 <= xn <= 104
```

## 解答
```js
var myPow = function(x, n) {
  if(x === 0) return 0;
  let b = n;
  let res = 1;
  if(b < 0) {
      x = 1 / x;
      b = -b;
  }
  while(b > 0) {
      if(b % 2 === 1) res *= x;
      x *= x;
      b = Math.floor(b/2);
  }
  return res;
};
```

二分推导： x^n = x^{n/2} * x^{n/2} = (x^2)^{n/2}，令 n/2 为整数，则需要分为奇偶两种情况（设向下取整除法符号为 "//" ）：

1. 当 n 为偶数： x^n = (x^2)^{n//2}
2. 当 n 为奇数： x^n = x(x^2)^{n//2},即会多出一项 x ；

幂结果获取：

根据二分推导，可通过循环 x = x^2 操作，每次把幂从 n 降至 n//2 ，直至将幂降为 0；

设 res=1，则初始状态 x^n = x^n * res。在循环二分时，每当 n 为奇数时，将多出的一项 x 乘入 res ，则最终可化至 x^n = x^0 * res = res，返回 res 即可。

<img src='img/64-1.png' />

转化为位运算：

向下整除 n // 2 等价于 右移一位 n >> 1 或者 Math.floor(n/2) ；
取余数 n % 2 等价于 判断二进制最右一位值 n & 1 或者 n%2 ；

算法流程：

* 当 x = 0 时：直接返回 0 （避免后续 x = 1 操作报错）。
* 初始化 res = 1 ；
* 当 n < 0 时：把问题转化至 n ≥ 0 的范围内，即执行 x = 1/x ，n = - n；
* 循环计算：当 n = 0 时跳出；
   1. 当 n & 1 = 1 时：将当前 x 乘入 res （即 res *= x ）；
   2. 执行 x = x^2（即 x *= x）；
   3. 执行 n 右移一位（即 n >>= 1）。
* 返回 res 。