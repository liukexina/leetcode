<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
</head>

<body></body>
<script>

  function p1() {
    return new Promise((resolve,reject) => {
      console.log('red')
      setTimeout(() => {
        resolve();
      }, 2000);
    })
  }

  function p2() {
    return new Promise((resolve,reject) => {
      console.log('yellow');
      setTimeout(() => {
        resolve()
      }, 1000);
    })
  }

  function p3() {
    return new Promise((resolve,reject) => {
      console.log('green');
        setTimeout(() => {
          resolve()
        }, 3000);
    })
  }
  function run(){
    Promise.resolve()
      .then(p1)
      .then(p2)
      .then(p3)
      .finally(run)
  }
  run()
</script>

</html>